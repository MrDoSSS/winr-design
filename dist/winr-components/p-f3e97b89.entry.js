import{r as t,h as i,H as r,g as s}from"./p-21a605ff.js";import{v as n}from"./p-5b57c0bd.js";const e=class{constructor(i){t(this,i),this.kind="primary",this.loading=!1,this.type="button"}render(){return i("button",{class:{[this.kind]:!0,loading:this.loading},type:this.type,disabled:this.disabled},i("span",null,i("slot",null)))}};e.style=":host{display:inline-block}";const o=class{constructor(i){t(this,i),this.inputObserver=new MutationObserver(this.setValidState.bind(this))}get form(){return this.el.querySelector("form")}componentDidRender(){this.submitBtns=this.findSubmitBtns()}componentDidLoad(){this.setValidState(),this.inputObserver.observe(this.el,{attributes:!0,subtree:!0,attributeFilter:["invalid"]})}submit(){this.submitBtns.forEach(t=>t.loading=!0)}findSubmitBtns(){return this.el.querySelectorAll("winr-btn[type=submit]")}setValidState(){const t=this.form.checkValidity();this.submitBtns.forEach(i=>i.disabled=!t)}render(){return i(r,null,i("slot",null))}get el(){return s(this)}},a=class{constructor(i){t(this,i),this.noValidate=!1,this.innerErrors=[],this.updateValue=t=>{this.value=t.target.value,this.setCustomValidity()}}get input(){return this.el.querySelector("input")}componentWillLoad(){this.parseValidator(this.validators),this.parseNative(this.native),this.parseErrors(this.errors)}componentDidLoad(){this.setCustomValidity()}componentShouldUpdate(t,i,r){return"valid"!==r||void 0!==i}parseValidator(t){this.innerValidators=t?JSON.parse(t):{}}parseNative(t){this.innerNative=t?JSON.parse(t):{}}parseErrors(t){this.innerErrors=t?JSON.parse(t):[]}validate(t){this.noValidate||function(t){return null==t||"object"==typeof t&&0===Object.keys(t).length||"string"==typeof t&&0===t.trim().length}(this.innerValidators)||(this.validateTimeout&&window.clearTimeout(this.validateTimeout),this.validateTimeout=window.setTimeout(()=>{this.innerValidators.forEach(i=>{n[i.name].validate(t,this.el.id,i)})},300))}validateResult(t){this.innerErrors=t.detail||[]}setCustomValidity(){this.input&&(this.input.setCustomValidity(this.innerErrors.join("\n")),this.valid=this.input.checkValidity())}render(){return i(r,{invalid:!this.valid},i("input",Object.assign({placeholder:this.label,value:this.value,onInput:this.updateValue},this.innerNative)),i("label",null,this.label),i("ul",{class:"errors"},this.innerErrors.map(t=>i("li",null,t))))}get el(){return s(this)}static get watchers(){return{validators:["parseValidator"],native:["parseNative"],errors:["parseErrors"],value:["validate"],innerErrors:["setCustomValidity"]}}};a.style="winr-input{display:block;position:relative;--paddint-top:1.25rem}winr-input input{padding:var(--paddint-top) 0 0.25rem;display:block;width:100%;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:none;border-bottom:0.05rem solid #ced4da;outline:none;appearance:none;transition:border-color 0.15s ease-in-out}winr-input input::placeholder{opacity:0}winr-input input:not(:placeholder-shown)~label{padding-top:0.5rem;font-size:0.75rem;border:none;color:#777}winr-input[errors] input,winr-input input:not(:placeholder-shown):invalid{border-bottom-color:var(--wds__error-color)}winr-input label{padding-top:calc(var(--paddint-top) + 0.2rem);position:absolute;top:0;left:0;display:block;font-size:1rem;line-height:1em;width:100%;color:#495057;pointer-events:none;cursor:text;border-left:0.01rem solid transparent;transition:padding 0.1s ease-in-out, font-size 0.1s ease-in-out;box-sizing:border-box}winr-input ul.errors{list-style:none;margin:0.3rem 0 0;padding:0;color:var(--wds__error-color)}winr-input ul.errors li{padding-left:0}winr-input ul.errors li::before{display:none}";export{e as winr_btn,o as winr_form,a as winr_input}